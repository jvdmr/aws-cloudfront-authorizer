<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Access granted</title>
</head>
<body>
<p>Access granted for:</p>
<ul id="domains"></ul>
<script type="application/javascript">
    var domains = {{{domains}}};  // This will be substituted with an array of strings by the Python code when being served
    var authorize_url = {{{authorize_url}}};  // This will be substituted with a string

    var list = document.getElementById('domains');
    for(var domain_nr in domains) {
        var url = 'https://' + domains[domain_nr] + '/';
        var auth_url = authorize_url + '?redirect_uri=' + encodeURIComponent(url);
        var link = document.createElement('a');
        link.href = auth_url;
        link.text = domains[domain_nr];
        var listitem = document.createElement('li');
        listitem.appendChild(link);

        list.appendChild(listitem);
    }
</script>
</body>
</html>
