<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Granting access...</title>
</head>
<body>
<p>Access granted for:</p>
<ul id="domains"></ul>
<script type="application/javascript">
var domains = {{{domains}}};  // This will be substituted with an array of strings by the Python code when being served
var path = {{{path}}};   // This will be substituted with a string
var token = {{{token}}};  // This will be substituted with a string

var list = document.getElementById('domains');
for(var domain_nr in domains) {
    var url = 'https://' + domains[domain_nr] + path +
        '?domain=' + domains[domain_nr] +
        '&token=' + token +
        '&return_to=https%3A%2F%2F' + domains[domain_nr] + '%2F';
    var link = document.createElement('a');
    link.href = url;
    link.text = domains[domain_nr];
    var listitem = document.createElement('li');
    listitem.appendChild(link);

    list.appendChild(listitem);
}
</script>
</body>
</html>
